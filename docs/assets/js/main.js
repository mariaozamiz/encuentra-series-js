"use strict";const searchButton=document.querySelector(".js-search-form__button");searchButton.addEventListener("click",readInput);let results=[],favs=[];function readInput(e){e.preventDefault();let t=document.querySelector(".js-search-form__input").value;t?makeRequest(t):showWarningMessage()}function makeRequest(e){fetch("http://api.tvmaze.com/search/shows?q="+e).then((function(e){return e.json()})).then((function(e){results=e,0===results.length?console.log("no hay serie, no"):paintResults()}))}function paintResults(){const e=document.querySelector(".js-results-list");document.querySelector(".results-list__title").classList.remove("hidden");for(const t of results){const s=document.createElement("li");e.appendChild(s),s.setAttribute("class","js-results-list__showcard"),s.setAttribute("id",t.show.id),addImage(t,s);const n=document.createElement("h3");s.appendChild(n),n.innerHTML=t.show.name}listenClicksOnPaintedResults()}function addImage(e,t){const s=document.createElement("img");t.appendChild(s),e.show.image?s.src=e.show.image.medium:s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"}function showWarningMessage(){document.querySelector(".warning-text").innerHTML="Realiza una bÃºsqueda para comenzar"}function listenClicksOnPaintedResults(){const e=document.querySelectorAll(".js-results-list__showcard");for(const t of e)t.addEventListener("click",saveAsFav)}function saveAsFav(e){const t=e.currentTarget.id,s=document.getElementById(t);s.classList.toggle("fav-show");const n=results.find(e=>e.show.id===parseInt(s.id));favs.push(n),updateLocalStorage()}function paintFavShowList(){document.querySelector(".favs-list__title").classList.remove("hidden");const e=JSON.parse(localStorage.getItem("favShows")),t=document.querySelector(".js-favs-list");t.innerHTML="";for(let s=0;s<e.length;s++){const n=document.createElement("li");t.appendChild(n),n.setAttribute("class","js-fav-list__showcard"),n.setAttribute("id",e[s].show.id),addFavsImage(e[s],n);const o=document.createElement("h3");n.appendChild(o),o.innerHTML=e[s].show.name;const a=document.createElement("i");a.setAttribute("class","fa fa-times-circle js-delete-icon"),n.appendChild(a)}listenToDeleteIcons()}function addFavsImage(e,t){const s=document.createElement("img");t.appendChild(s),e.show.image?s.src=e.show.image.medium:s.src="https://via.placeholder.com/210x295/ffffff/666666/?text=TV"}function updateLocalStorage(){localStorage.setItem("favShows",JSON.stringify(favs)),paintFavShowList()}function listenToDeleteIcons(){const e=document.querySelectorAll(".js-delete-icon");for(const t of e)t.addEventListener("click",updateFavs)}function updateFavs(e){const t=e.currentTarget.parentElement.id,s=document.getElementById(t);deleteFav(favs.find(e=>e.show.id===parseInt(s.id))),updateLocalStorage()}function deleteFav(e){const t=favs.indexOf(e);favs.splice(t,1)}